# OR Acceptance Strategy — Optimization Study

**Date:** 2026-02-27
**Status:** ACTIVE (v2 — optimized, producing trades)
**Prior:** v1 produced 0 trades in 260 sessions (overly strict acceptance)

---

## Executive Summary

OR Acceptance went from **0 trades → 71 trades** by:
1. Expanding acceptance levels beyond London-only to Asia H/L, PDH/PDL
2. Relaxing acceptance from strict (100% bars below level) to 70% closes + 5 wick violations
3. Using the full IB window (60 bars) instead of EOR (30 bars)

**Optimized results:** 71 trades, 43.7% WR, PF 1.32, $3,173 net, MaxDD $2,845

**Combined with OR Reversal:** 186 trades, 54.3% WR, PF 2.34, $35,811 net (~$2,984/mo)

---

## Root Cause Analysis (0 Trades)

The original v1 condition required:
```
eor_high < london_low   (SHORT)
eor_low > london_high   (LONG)
```

This means the **entire** first 30 minutes of RTH must stay on one side of a London level. On NQ with typical 100-250pt EOR ranges, London levels almost always fall inside that range.

### Funnel Diagnostic Results (259 sessions)

| Gate | SHORT | LONG | Total |
|------|-------|------|-------|
| Valid EOR (>10pts) | 259 | 259 | 259 |
| London levels exist | 258 | 258 | 258 |
| Strict: LDN_LOW | 31 | 0 | 31 |
| Strict: ASIA_LOW | 40 | 0 | 40 |
| Strict: PDL | 22 | 0 | 22 |
| Strict: LDN_HIGH | 0 | 29 | 29 |
| Strict: ASIA_HIGH | 0 | 45 | 45 |
| Strict: PDH | 0 | 37 | 37 |

**Key insight:** With expanded levels (not just London), there ARE strict acceptance events. Asia H/L and PDH/PDL produce even more than London. But the v1 code only checked London.

---

## Parameter Sweep Results

9 configurations tested across window × relaxation level:

| Config | Trades | WR% | PF | Net P&L | $/trade | MaxDD |
|--------|--------|-----|-----|---------|---------|-------|
| Strict (baseline) | 74 | 39.2% | 1.05 | $579 | $8 | $2,681 |
| Conservative | 76 | 39.5% | 1.10 | $1,224 | $16 | $2,739 |
| Moderate | 76 | 39.5% | 1.10 | $1,224 | $16 | $2,739 |
| Aggressive (EOR) | 81 | 40.7% | 1.18 | $2,314 | $29 | $2,539 |
| Ultra-aggressive | 86 | 38.4% | 1.09 | $1,182 | $14 | $2,539 |
| OR-window-agg | 89 | 38.2% | 1.04 | $629 | $7 | $3,371 |
| **IB-window-agg** | **71** | **43.7%** | **1.32** | **$3,173** | **$45** | **$2,845** |
| Close-only 80% | 91 | 40.7% | 1.20 | $2,743 | $30 | $2,539 |
| Close-only 70% | 91 | 40.7% | 1.20 | $2,743 | $30 | $2,539 |

**Winner: IB-window-agg** — Best WR, best PF, best net P&L, and best $/trade.

### Why IB window wins

The IB window (60 bars / 60 minutes) provides more time for acceptance to establish. With the shorter EOR window (30 bars), many sessions show initial acceptance that fails — price briefly breaks a level then reclaims it within 30 minutes. By waiting for 60 minutes of acceptance, only the strongest breaks survive, producing fewer but higher-quality trades.

### Direction Breakdown (IB-window config)

| Direction | Trades | WR | PF | Net P&L |
|-----------|--------|-----|-----|---------|
| LONG | 42 | 42.9% | 1.31 | $2,032 |
| SHORT | 29 | 44.8% | 1.34 | $1,141 |

Both directions profitable. SHORT WR (44.8%) is actually higher than LONG — unusual for NQ but makes sense: when NQ (structural long bias) breaks DOWN and holds, it's a strong signal.

---

## Combined Portfolio: OR Reversal + OR Acceptance

| Strategy | Trades | WR | PF | Net P&L | $/mo |
|----------|--------|-----|-----|---------|------|
| OR Reversal | 115 | 60.9% | 2.96 | $32,639 | $2,720 |
| OR Acceptance | 71 | 43.7% | 1.32 | $3,173 | $264 |
| **Combined** | **186** | **54.3%** | **2.34** | **$35,811** | **$2,984** |

Combined metrics: Sharpe 6.90, Sortino 29.75, MaxDD $3,213 (1.73%)

The strategies are naturally non-overlapping:
- OR Reversal: price SWEEPS a level → REVERSES
- OR Acceptance: price BREAKS a level → CONTINUES

---

## Implementation Details

### Acceptance Levels Checked
- London High / London Low (02:00-05:00 ET)
- Asia High / Asia Low (20:00-00:00 ET)
- Prior Day High / Prior Day Low

### Relaxed Acceptance Logic
```python
MAX_WICK_VIOLATIONS = 5       # Bars allowed to spike past level
CLOSE_ACCEPTANCE_PCT = 0.70   # 70% of IB closes on correct side
ACCEPTANCE_BUFFER_PCT = 0.10  # Max spike = 10% of EOR range
ACCEPTANCE_WINDOW = 'IB'      # 60-bar (full IB) window
```

### Entry Model (unchanged from v1)
1. Acceptance confirmed after IB window check
2. Scan IB bars for 50% retest of acceptance range
3. Require price turning (close < prev_close for SHORT)
4. Require delta < 0 OR CVD declining (for SHORT)
5. Stop: acceptance_level + 0.5 ATR buffer
6. Target: 2R

---

## Key Findings

1. **London-only was too narrow** — Asia H/L and PDH/PDL produce more acceptance events than London alone
2. **IB window (60 bars) beats EOR (30 bars)** — 43.7% vs 40.7% WR, 1.32 vs 1.18 PF
3. **Relaxation helps but has limits** — ultra-aggressive (60% closes, 8 wicks) degrades quality
4. **SHORT acceptance on NQ works** — 44.8% WR (beats LONG's 42.9%), counterintuitive but real
5. **OR Acceptance + OR Reversal don't conflict** — they trade opposite patterns on the same levels
6. **The 50% retest entry model is the bottleneck** — 139 sessions pass relaxed acceptance but only 89 get feasible entries (64%). Improving entry model could add ~30 more trades
7. **Exit management matters** — 35% of trades exit on stops vs 15% on targets; the 25% EOD exits suggest targets may be too aggressive (2R) for a continuation pattern
8. **MaxDD stays manageable** — all configs under $3,400, well within $4K prop firm limit
9. **The combined portfolio is robust** — 186 trades, 54.3% WR, PF 2.34, Sharpe 6.90

---

## Files

| File | Purpose |
|------|---------|
| `strategy/or_acceptance.py` | Strategy implementation (v2 optimized) |
| `scripts/diag_or_acceptance_funnel.py` | Funnel diagnostic (why 0 trades) |
| `scripts/test_or_acceptance_sweep.py` | Parameter sweep across 9 configs |
| `docs/reports/2026.02.27-OR-Reversal-OR-Acceptance-Strategy-Report.md` | Original v1 report |

---

## Future Research Opportunities

1. **Tighten target from 2R to 1.5R** — may convert more EOD exits into target hits
2. **Add time-based exit** (e.g., close by 1:00 PM if not at 1R) — reduce EOD exits
3. **Test LONG-only mode** — NQ long bias may make LONG more reliable long-term despite SHORT's current edge
4. **Combine with volume confirmation** — require volume spike at acceptance level
5. **Intraday pyramiding** — add to winners after OR Acceptance confirms and price continues
